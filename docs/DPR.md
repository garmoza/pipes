# Device Pixel Ration

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
```ts
export class Game {
  private canvas: HTMLCanvasElement
  private ctx: CanvasRenderingContext2D
  private dpr: number // Device Pixel Ratio

  private childScreen: ChildScreen // –ª—é–±–æ–π –≤–ª–æ–∂–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç

  constructor(canvas: HTMLCanvasElement) {
    this.canvas = canvas
    const ctx = canvas.getContext('2d')
    if (!ctx) {
      throw new Error('Failed to get 2D context')
    }
    this.ctx = ctx

    // –ü–æ–ª—É—á–∞–µ–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–∏–∫—Å–µ–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    this.dpr = window.devicePixelRatio || 1

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    this.canvas.addEventListener('click', this.handleClick.bind(this))

    // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
    window.addEventListener('resize', this.resize.bind(this))

    // –ù–∞—á–∞–ª—å–Ω—ã–π —Ä–µ—Å–∞–π–∑
    this.resize()
  }

  private handleClick(e: MouseEvent): void {
    console.log('Click detected! ' + e.clientX + ' ' + e.clientY + ' ' + this.dpr)
    // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞
  }

  private resize(): void {
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º CSS —Ä–∞–∑–º–µ—Ä—ã
    this.canvas.style.width = window.innerWidth + 'px'
    this.canvas.style.height = window.innerHeight + 'px'

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–∞–∑–º–µ—Ä—ã —Å —É—á–µ—Ç–æ–º DPR –¥–ª—è —á–µ—Ç–∫–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    this.canvas.width = window.innerWidth * this.dpr
    this.canvas.height = window.innerHeight * this.dpr

    // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
    this.childScreen.handleResize()

    // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º
    this.draw()
  }

  private draw(): void {
    this.ctx.save()
    this.ctx.fillStyle = '#2c3e50'
    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)
    this.ctx.restore()
  }
}
```

`window.devicePixelRatio` - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–∏—Å–ø–ª–µ—è —Ç–µ–∫—É—â–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ø–∏–∫—Å–µ–ª—è—Ö –∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—é –≤ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö (CSS) –ø–∏–∫—Å–µ–ª—è—Ö. –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –æ–±—ã—á–Ω–æ  > 1. P.S. —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ Dev Tools –∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.


`canvas.style.width`, `canvas.style.height` - CSS-—Ä–∞–∑–º–µ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –û–ø—Ä–µ–¥–µ–ª—è—é—Ç, —Å–∫–æ–ª—å–∫–æ –º–µ—Å—Ç–∞ –∑–∞–Ω–∏–º–∞–µ—Ç canvas –Ω–∞ —ç–∫—Ä–∞–Ω–µ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö, –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –∏ —Ç.–¥.). –ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω—è–µ—Ç–µ `style.width` –∏–ª–∏ `style.height`, –±—Ä–∞—É–∑–µ—Ä –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ canvas, —á—Ç–æ–±—ã –æ–Ω–æ —É–º–µ—Å—Ç–∏–ª–æ—Å—å –≤ —ç—Ç–æ —Ä–∞–∑–º–µ—Ä.

`canvas.width`, `canvas.height` - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–∞–∑–º–µ—Ä—ã –±—É—Ñ–µ—Ä–∞ canvas (—Ç.–µ. —Å–∫–æ–ª—å–∫–æ –ø–∏–∫—Å–µ–ª–µ–π —Ä–∏—Å—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –∫–∞—á–µ—Å—Ç–≤–æ–º –æ—Ç—Ä–∏—Å–æ–≤–∫–∏.

### –ö–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `canvas.style.width=""`, –±—Ä–∞—É–∑–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∏—Ç —Ä–∞–∑–º–µ—Ä –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∏–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—è.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `canvas.width=300`, `canvas.height=150`.

### –ö–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–æ–∏—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –¥–ª—è DPR?

–ü–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –ª—É—á—à–µ –±—Ä–∞—Ç—å `dpr = window.devicePixelRatio`.

–ë—Ä–∞—Ç—å `dpr <  window.devicePixelRatio` –Ω–µ –ø—Ä–∏–Ω–µ—Å–µ—Ç –Ω–∏–∫–∞–∫–æ–π –ø–æ–ª—å–∑—ã, –∞ —Ç–æ–ª—å–∫–æ —É—Ö—É–¥—à–∏—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

–ë—Ä–∞—Ç—å `dpr >  window.devicePixelRatio` –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, —Ç–∞–∫ –∫–∞–∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–≤–∏–∂–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –º–æ–≥—É—Ç –¥–∞–≤–∞—Ç—å –±–æ–ª–µ–µ –≥–ª–∞–¥–∫–∏–µ –∫—Ä–∞—è (–æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è —Ç–µ–∫—Å—Ç–∞, –¥–∏–∞–≥—Ä–∞–º–º, –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–∏).

–ù–µ—Ç —Å–º—ã—Å–ª–∞ —Å–∏–ª—å–Ω–æ –∑–∞–≤—ã—à–∞—Ç—å DPR –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `window.devicePixelRatio`. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∞ –≤–∏–∑—É–∞–ª—å–Ω–æ —Ä–∞–∑–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –∑–∞–º–µ—Ç–Ω–∞.

### üìè –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è `canvas.width`

| –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç              | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|--------------------------|--------------------------------------------------------------------------|
| `dpr * 1`                | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –ß—ë—Ç–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ |
| `dpr * 1.5`              | –£–º–µ—Ä–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ. –£–ª—É—á—à–µ–Ω–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏     |
| `dpr * 2` –∏ –≤—ã—à–µ         | –õ–∏—à–Ω–µ–µ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤. –ú–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å               |

–ü—Ä–æ–ø–æ—Ä—Ü–∏–∏ –º–µ–∂–¥—É `canvas.style.width`/`canvas.width` –∏ `canvas.style.height`/`canvas.height` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏, —á—Ç–æ–±—ã –Ω–µ —Å–∂–∞—Ç—å –∏–ª–∏ –Ω–µ —Ä–∞—Å—Ç—è–Ω—É—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

### –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å –∏—Ö. –î–ª—è —ç—Ç–æ–≥–æ —Ç–∞–∫–∂–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã `canvas.width/height` –∏ `canvas.style.width/height`.

```ts
window.addEventListener('resize', this.resize.bind(this))

private resize(): void {
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º CSS —Ä–∞–∑–º–µ—Ä—ã
  this.canvas.style.width = window.innerWidth + 'px'
  this.canvas.style.height = window.innerHeight + 'px'

  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–∞–∑–º–µ—Ä—ã —Å —É—á–µ—Ç–æ–º DPR –¥–ª—è —á–µ—Ç–∫–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  this.canvas.width = window.innerWidth * this.dpr
  this.canvas.height = window.innerHeight * this.dpr

  // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
  this.childScreen.handleResize()

  // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º
  this.draw()
}
```

–ß—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É –∏ –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω–Ω—ã–º, —á—Ç–æ –≤—Å–µ –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É—á–∏—Ç—ã–≤–∞—é—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –ø–∏–∫—Å–µ–ª–µ–π, –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç.
```ts
this.ctx.scale(this.dpr, this.dpr)
```